<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶§‡¶æ‡¶®‡¶≠‡ßÄ‡¶∞ ‡¶≠‡¶æ‡¶á‡ßü‡¶æ‡¶∞ ‡¶™‡¶æ‡¶†‡¶∂‡¶æ‡¶≤‡¶æ</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { background-color: #0b0e14; color: #00f2ff; font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; padding: 20px; }
        .container { max-width: 500px; margin: auto; background: #1a1f29; padding: 30px; border-radius: 20px; box-shadow: 0 0 20px rgba(0,242,255,0.2); }
        input { width: 90%; padding: 12px; margin: 10px 0; border: 1px solid #00f2ff; border-radius: 8px; background: #0b0e14; color: white; }
        button { background: #00f2ff; color: #000; border: none; padding: 15px 30px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; font-size: 16px; }
        video { width: 100%; border-radius: 15px; border: 2px solid #00f2ff; margin-top: 20px; background: #000; }
        #remote-video { border-color: #ff00ff; }
    </style>
</head>
<body>

    <div class="container" id="login-box">
        <h1>üéì ‡¶™‡¶æ‡¶†‡¶∂‡¶æ‡¶≤‡¶æ ‡¶≤‡¶æ‡¶á‡¶≠</h1>
        <p>Created by Yuvraj</p>
        <input type="text" id="room-id" placeholder="‡¶∞‡ßÅ‡¶Æ ‡¶Ü‡¶á‡¶°‡¶ø (‡¶Ø‡ßá‡¶Æ‡¶®: math123)">
        <button onclick="startCall()">‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <div id="video-section" style="display:none;">
        <h3>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</h3>
        <video id="local-video" autoplay muted playsinline></video>
        <h3>‡¶≠‡¶æ‡¶á‡ßü‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</h3>
        <div id="remote-video-container"></div>
    </div>

    <script>
        let localStream;
        let peer;

        async function startCall() {
            const roomId = document.getElementById('room-id').value;
            if (!roomId) return alert("‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®");

            try {
                // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶ì ‡¶Æ‡¶æ‡¶á‡¶ï‡ßç‡¶∞‡ßã‡¶´‡ßã‡¶® ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶®‡ßá‡¶ì‡ßü‡¶æ
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('local-video').srcObject = localStream;
                
                document.getElementById('login-box').style.display = 'none';
                document.getElementById('video-section').style.display = 'block';

                // PeerJS ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ
                peer = new Peer(roomId);

                peer.on('open', (id) => {
                    alert("‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶® ‡¶≤‡¶æ‡¶á‡¶≠! ‡¶≠‡¶æ‡¶á‡ßü‡¶æ‡¶ï‡ßá ‡¶¨‡¶≤‡ßÅ‡¶® ‡¶è‡¶á ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡ßü‡ßá ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡¶§‡ßá: " + id);
                });

                // ‡¶ï‡¶≤ ‡¶∞‡¶ø‡¶∏‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶æ
                peer.on('call', (call) => {
                    call.answer(localStream);
                    call.on('stream', (remoteStream) => {
                        addRemoteVideo(remoteStream);
                    });
                });

            } catch (err) {
                alert("‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶Ö‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶¶‡¶ø‡¶®‡•§");
                console.error(err);
            }
        }

        function addRemoteVideo(stream) {
            if (document.getElementById('remote-video')) return;
            const video = document.createElement('video');
            video.id = 'remote-video';
            video.srcObject = stream;
            video.autoplay = true;
            video.playsinline = true;
            document.getElementById('remote-video-container').append(video);
        }
    </script>
</body>
</html>
